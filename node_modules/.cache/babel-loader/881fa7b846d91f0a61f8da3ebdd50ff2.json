{"ast":null,"code":"'use strict';\n\nvar commands = require('redis-commands');\n\nvar Multi = require('./multi');\n\nvar RedisClient = require('../').RedisClient;\n\nvar Command = require('./command'); // Feature detect if a function may change it's name\n\n\nvar changeFunctionName = function () {\n  var fn = function abc() {};\n\n  try {\n    Object.defineProperty(fn, 'name', {\n      value: 'foobar'\n    });\n    return true;\n  } catch (e) {\n    return false;\n  }\n}();\n\nvar addCommand = function (command) {\n  // Some rare Redis commands use special characters in their command name\n  // Convert those to a underscore to prevent using invalid function names\n  var commandName = command.replace(/(?:^([0-9])|[^a-zA-Z0-9_$])/g, '_$1'); // Do not override existing functions\n\n  if (!RedisClient.prototype[command]) {\n    RedisClient.prototype[command.toUpperCase()] = RedisClient.prototype[command] = function () {\n      var arr;\n      var len = arguments.length;\n      var callback;\n      var i = 0;\n\n      if (Array.isArray(arguments[0])) {\n        arr = arguments[0];\n\n        if (len === 2) {\n          callback = arguments[1];\n        }\n      } else if (len > 1 && Array.isArray(arguments[1])) {\n        if (len === 3) {\n          callback = arguments[2];\n        }\n\n        len = arguments[1].length;\n        arr = new Array(len + 1);\n        arr[0] = arguments[0];\n\n        for (; i < len; i += 1) {\n          arr[i + 1] = arguments[1][i];\n        }\n      } else {\n        // The later should not be the average use case\n        if (len !== 0 && (typeof arguments[len - 1] === 'function' || typeof arguments[len - 1] === 'undefined')) {\n          len--;\n          callback = arguments[len];\n        }\n\n        arr = new Array(len);\n\n        for (; i < len; i += 1) {\n          arr[i] = arguments[i];\n        }\n      }\n\n      return this.internal_send_command(new Command(command, arr, callback));\n    }; // Alias special function names (e.g. NR.RUN becomes NR_RUN and nr_run)\n\n\n    if (commandName !== command) {\n      RedisClient.prototype[commandName.toUpperCase()] = RedisClient.prototype[commandName] = RedisClient.prototype[command];\n    }\n\n    if (changeFunctionName) {\n      Object.defineProperty(RedisClient.prototype[command], 'name', {\n        value: commandName\n      });\n    }\n  } // Do not override existing functions\n\n\n  if (!Multi.prototype[command]) {\n    Multi.prototype[command.toUpperCase()] = Multi.prototype[command] = function () {\n      var arr;\n      var len = arguments.length;\n      var callback;\n      var i = 0;\n\n      if (Array.isArray(arguments[0])) {\n        arr = arguments[0];\n\n        if (len === 2) {\n          callback = arguments[1];\n        }\n      } else if (len > 1 && Array.isArray(arguments[1])) {\n        if (len === 3) {\n          callback = arguments[2];\n        }\n\n        len = arguments[1].length;\n        arr = new Array(len + 1);\n        arr[0] = arguments[0];\n\n        for (; i < len; i += 1) {\n          arr[i + 1] = arguments[1][i];\n        }\n      } else {\n        // The later should not be the average use case\n        if (len !== 0 && (typeof arguments[len - 1] === 'function' || typeof arguments[len - 1] === 'undefined')) {\n          len--;\n          callback = arguments[len];\n        }\n\n        arr = new Array(len);\n\n        for (; i < len; i += 1) {\n          arr[i] = arguments[i];\n        }\n      }\n\n      this.queue.push(new Command(command, arr, callback));\n      return this;\n    }; // Alias special function names (e.g. NR.RUN becomes NR_RUN and nr_run)\n\n\n    if (commandName !== command) {\n      Multi.prototype[commandName.toUpperCase()] = Multi.prototype[commandName] = Multi.prototype[command];\n    }\n\n    if (changeFunctionName) {\n      Object.defineProperty(Multi.prototype[command], 'name', {\n        value: commandName\n      });\n    }\n  }\n};\n\ncommands.list.forEach(addCommand);\nmodule.exports = addCommand;","map":{"version":3,"sources":["/Users/erinx/code/hyperplaneReact/road-to-react/js-job-board-diy/node_modules/redis/lib/commands.js"],"names":["commands","require","Multi","RedisClient","Command","changeFunctionName","fn","abc","Object","defineProperty","value","e","addCommand","command","commandName","replace","prototype","toUpperCase","arr","len","arguments","length","callback","i","Array","isArray","internal_send_command","queue","push","list","forEach","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar commands = require('redis-commands');\nvar Multi = require('./multi');\nvar RedisClient = require('../').RedisClient;\nvar Command = require('./command');\n// Feature detect if a function may change it's name\nvar changeFunctionName = (function () {\n    var fn = function abc () {};\n    try {\n        Object.defineProperty(fn, 'name', {\n            value: 'foobar'\n        });\n        return true;\n    } catch (e) {\n        return false;\n    }\n}());\n\nvar addCommand = function (command) {\n    // Some rare Redis commands use special characters in their command name\n    // Convert those to a underscore to prevent using invalid function names\n    var commandName = command.replace(/(?:^([0-9])|[^a-zA-Z0-9_$])/g, '_$1');\n\n    // Do not override existing functions\n    if (!RedisClient.prototype[command]) {\n        RedisClient.prototype[command.toUpperCase()] = RedisClient.prototype[command] = function () {\n            var arr;\n            var len = arguments.length;\n            var callback;\n            var i = 0;\n            if (Array.isArray(arguments[0])) {\n                arr = arguments[0];\n                if (len === 2) {\n                    callback = arguments[1];\n                }\n            } else if (len > 1 && Array.isArray(arguments[1])) {\n                if (len === 3) {\n                    callback = arguments[2];\n                }\n                len = arguments[1].length;\n                arr = new Array(len + 1);\n                arr[0] = arguments[0];\n                for (; i < len; i += 1) {\n                    arr[i + 1] = arguments[1][i];\n                }\n            } else {\n                // The later should not be the average use case\n                if (len !== 0 && (typeof arguments[len - 1] === 'function' || typeof arguments[len - 1] === 'undefined')) {\n                    len--;\n                    callback = arguments[len];\n                }\n                arr = new Array(len);\n                for (; i < len; i += 1) {\n                    arr[i] = arguments[i];\n                }\n            }\n            return this.internal_send_command(new Command(command, arr, callback));\n        };\n        // Alias special function names (e.g. NR.RUN becomes NR_RUN and nr_run)\n        if (commandName !== command) {\n            RedisClient.prototype[commandName.toUpperCase()] = RedisClient.prototype[commandName] = RedisClient.prototype[command];\n        }\n        if (changeFunctionName) {\n            Object.defineProperty(RedisClient.prototype[command], 'name', {\n                value: commandName\n            });\n        }\n    }\n\n    // Do not override existing functions\n    if (!Multi.prototype[command]) {\n        Multi.prototype[command.toUpperCase()] = Multi.prototype[command] = function () {\n            var arr;\n            var len = arguments.length;\n            var callback;\n            var i = 0;\n            if (Array.isArray(arguments[0])) {\n                arr = arguments[0];\n                if (len === 2) {\n                    callback = arguments[1];\n                }\n            } else if (len > 1 && Array.isArray(arguments[1])) {\n                if (len === 3) {\n                    callback = arguments[2];\n                }\n                len = arguments[1].length;\n                arr = new Array(len + 1);\n                arr[0] = arguments[0];\n                for (; i < len; i += 1) {\n                    arr[i + 1] = arguments[1][i];\n                }\n            } else {\n                // The later should not be the average use case\n                if (len !== 0 && (typeof arguments[len - 1] === 'function' || typeof arguments[len - 1] === 'undefined')) {\n                    len--;\n                    callback = arguments[len];\n                }\n                arr = new Array(len);\n                for (; i < len; i += 1) {\n                    arr[i] = arguments[i];\n                }\n            }\n            this.queue.push(new Command(command, arr, callback));\n            return this;\n        };\n        // Alias special function names (e.g. NR.RUN becomes NR_RUN and nr_run)\n        if (commandName !== command) {\n            Multi.prototype[commandName.toUpperCase()] = Multi.prototype[commandName] = Multi.prototype[command];\n        }\n        if (changeFunctionName) {\n            Object.defineProperty(Multi.prototype[command], 'name', {\n                value: commandName\n            });\n        }\n    }\n};\n\ncommands.list.forEach(addCommand);\n\nmodule.exports = addCommand;\n"]},"metadata":{},"sourceType":"script"}